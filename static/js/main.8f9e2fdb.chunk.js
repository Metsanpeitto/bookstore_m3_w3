(this.webpackJsonpbookstore_m3_w3=this.webpackJsonpbookstore_m3_w3||[]).push([[0],{75:function(e,t,c){},76:function(e,t,c){"use strict";c.r(t);var n=c(0),o=c.n(n),a=c(16),r=c.n(a),s=c(13),i=c(6),u=c(20),l=c(37),b=c(38),d=c.n(b),j=c(26),h=c(25),O="bookStore/books/ADD_BOOK",p="bookStore/books/REMOVE_BOOK",v="bookStore/books/RECEIVE_BOOKS",m={books:[]},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:var c=[].concat(Object(h.a)(e.books),[t.payload]);return Object(j.a)(Object(j.a)({},e),{},{books:c});case p:var n=e.books,o=e.booksFiltered,a=[];return n.length>0&&(a=n.filter((function(e){return e.id!==t.payload}))),{books:Object(h.a)(a),booksFiltered:o};case v:var r=t.books;return{books:r};default:return e}},x="bookStore/filter/FILTER_BOOKS",k="bookStore/filter/FILTER_REFRESH",g={booksFiltered:null,value:"-"},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:var c=t.payload,n=c.value,o=c.books,a=[];return o.length>0&&("-"===n?a=null:o.forEach((function(e){e.category===n&&a.push(e)}))),{booksFiltered:a,value:n};case k:var r=t.payload.books,s=e.value,i=r;return r&&r.length>0&&"-"!==s&&(i=[],r.forEach((function(e){e.category===s&&i.push(e)}))),{booksFiltered:i,value:s};default:return e}},N=Object(u.b)({booksReducer:f,filterReducer:y}),E=Object(u.c)(N,Object(u.a)(l.a,d.a)),S=c(39),R=c(40),C=c(42),B=c(41),_=c(3),F=c.p+"static/media/user.84604ed3.svg",w=c(1),A=function(){return Object(w.jsxs)("nav",{className:"navBar",children:[Object(w.jsx)("h1",{className:"title",children:"Bookstore CMS"}),Object(w.jsxs)("ul",{className:"menuNav",children:[Object(w.jsx)("li",{children:Object(w.jsx)(s.b,{to:"/",active:"true",exact:"true",children:"BOOKS"})},1),Object(w.jsx)("li",{children:Object(w.jsx)(s.b,{to:"/categories",exact:"true",children:"CATEGORIES"})},2)]}),Object(w.jsx)("div",{className:"user",children:Object(w.jsx)("img",{src:F,className:"user-icon",alt:"logo"})})]})},T=c(10),D=c(78),I=c(11),K=c.n(I),L=c(18),M=c(19),P=c.n(M),H="https://us-central1-bookstore-api-e63c8.cloudfunctions.net/bookstoreApi",U="gtVRbJXENaszGHUmYTTc",V={getBooks:function(){var e=Object(L.a)(K.a.mark((function e(){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P.a.get("".concat(H,"/apps/").concat(U,"/books")).then((function(e){var t=[];if(200===e.status)for(var c=e.data,n=0,o=Object.entries(c);n<o.length;n++){var a=Object(T.a)(o[n],2),r=a[0],s=a[1],i={item_id:r,title:s[0].title,category:s[0].category};t.push(i)}return t})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addBook:function(){var e=Object(L.a)(K.a.mark((function e(t){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P.a.post("".concat(H,"/apps/").concat(U,"/books"),{item_id:t.item_id,title:t.title,category:t.category}).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removeBook:function(){var e=Object(L.a)(K.a.mark((function e(t){return K.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",P.a.delete("".concat(H,"/apps/").concat(U,"/books/").concat(t),{item_id:t}).then((function(e){return e.data})).catch((function(){return"error"})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},G=function(){return function(e){V.getBooks().then((function(t){return e(function(e){return{type:"bookStore/books/RECEIVE_BOOKS",books:e}}(t)),e({type:"bookStore/filter/FILTER_REFRESH",payload:t}),t}))}};var J=function(){var e=Object(i.c)(),t=Object(n.useState)(""),c=Object(T.a)(t,2),o=c[0],a=c[1],r=Object(n.useState)(""),s=Object(T.a)(r,2),u=s[0],l=s[1],b=Object(n.useState)("Science"),d=Object(T.a)(b,2),j=d[0],h=d[1];return Object(w.jsxs)("div",{className:"adder",children:[Object(w.jsx)("h2",{className:"adder-header",children:"ADD NEW BOOK"}),Object(w.jsxs)("div",{className:"add-form",children:[Object(w.jsx)("input",{className:"adder-title input",placeholder:"Title",onChange:function(e){return a(e.target.value)},type:"text",name:"input-title",id:"input-title"}),Object(w.jsx)("input",{className:"adder-author input",placeholder:"Author",onChange:function(e){return l(e.target.value)},type:"text",name:"input-author",id:"input-author"}),Object(w.jsxs)("select",{className:"adder-category input",placeholder:"Category",onChange:function(e){return h(e.target.value)},id:"input-category",name:"input-category",children:[Object(w.jsx)("option",{value:"Science",children:"Science Fiction"}),Object(w.jsx)("option",{value:"Economy",children:"Economy"}),Object(w.jsx)("option",{value:"Action",children:"Action"})]}),Object(w.jsx)("button",{className:"btn-1",type:"submit",onClick:function(){var t,c={item_id:Object(D.a)(),title:o,category:j,author:u};e((t=c,function(e){V.addBook(t).then((function(t){return"Created"===t&&e(G()),t}))}))},children:"ADD BOOK"})]})]})};var z=function(e){var t=Object(i.c)(),c=e,n=c.data.title,o=c.data.author,a=c.data.category,r=c.data.item_id,s=function(){var e;t((e=r,function(t){V.removeBook(e).then((function(e){return"The book was deleted successfully!"===e&&t(G()),e}))}))};return Object(w.jsxs)("div",{className:"bookcard",id:r,children:[Object(w.jsxs)("div",{className:"bookcard-left",children:[Object(w.jsx)("h4",{className:"bookcard_genre",children:a}),Object(w.jsx)("h3",{className:"title",children:n}),Object(w.jsx)("h6",{className:"author",children:o}),Object(w.jsxs)("div",{className:"actions",children:[Object(w.jsx)("button",{type:"button",className:"btn-2",children:"Comments"}),Object(w.jsx)("div",{className:"vertical-line"}),Object(w.jsx)("button",{type:"button",className:"btn-2",onClick:function(){return s()},children:"Remove"}),Object(w.jsx)("div",{className:"vertical-line"}),Object(w.jsx)("button",{type:"button",className:"btn-2",children:"Edit"})]})]}),Object(w.jsxs)("div",{className:"bookcard-center",children:[Object(w.jsx)("div",{src:"./",alt:"progress",className:"progress"}),Object(w.jsxs)("div",{className:"data",children:[Object(w.jsx)("h3",{className:"progress-number",children:"64%"}),Object(w.jsx)("h6",{className:"progress-state",children:"Completed"})]})]}),Object(w.jsx)("div",{className:"bookcard-right",children:Object(w.jsxs)("div",{className:"chapter",children:[Object(w.jsx)("h3",{className:"chapter-label",children:"CURRENT CHAPTER"}),Object(w.jsx)("h6",{className:"chapter-chapter",children:"Chapter 3: A Lesson Learned"}),Object(w.jsx)("button",{type:"button",className:"btn-1",children:"UPDATE PROGRESS"})]})})]})};var W=function(){var e=Object(i.d)((function(e){return e})),t=e.booksReducer,c=e.filterReducer,o=t.books,a=c.booksFiltered,r=Object(n.useState)(null),s=Object(T.a)(r,2),u=s[0],l=s[1];return Object(n.useEffect)((function(){a?a!==u&&l(a):o!==u&&l(o)})),u?Object(w.jsx)("div",{className:"books-displayer",children:u.length>0?u.map((function(e){return Object(w.jsx)(z,{data:e},e.title)})):null}):Object(w.jsx)("h3",{children:"Empty collection"})};var X=function(){var e=Object(i.c)(),t=Object(i.d)((function(e){return e})).booksReducer.books;return Object(w.jsxs)("select",{className:"filter-category",placeholder:"Category",onChange:function(c){var n=c.target.value;e({type:x,payload:{value:n,books:t}})},id:"input-category",name:"input-category",children:[Object(w.jsx)("option",{value:"-",children:" - "}),Object(w.jsx)("option",{value:"Science",children:"Science Fiction"}),Object(w.jsx)("option",{value:"Economy",children:"Economy"}),Object(w.jsx)("option",{value:"Action",children:"Action"})]})},Y=function(){return Object(w.jsxs)("div",{className:"books",children:[Object(w.jsx)(X,{}),Object(w.jsx)(W,{}),Object(w.jsx)(J,{})]})},q=function(){return Object(w.jsx)("div",{className:"content",children:Object(w.jsx)("h3",{children:"Under construction "})})},Q=(c(75),function(e){Object(C.a)(c,e);var t=Object(B.a)(c);function c(e){var n;return Object(S.a)(this,c),(n=t.call(this,e)).state={},n}return Object(R.a)(c,[{key:"componentDidMount",value:function(){this.props&&(0,this.props.getBooks)()}},{key:"render",value:function(){return Object(w.jsxs)("div",{className:"App",children:[Object(w.jsx)(A,{}),Object(w.jsxs)(_.c,{children:[Object(w.jsx)(_.a,{exact:!0,path:"/",component:Y}),Object(w.jsx)(_.a,{path:"/categories",component:q})]})]})}}]),c}(o.a.Component)),Z=Object(i.b)((function(e){return{state:e}}),{store:E,getBooks:G})(Q),$=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,79)).then((function(t){var c=t.getCLS,n=t.getFID,o=t.getFCP,a=t.getLCP,r=t.getTTFB;c(e),n(e),o(e),a(e),r(e)}))};r.a.render(Object(w.jsx)(i.a,{store:E,children:Object(w.jsx)(s.a,{basename:"/Metsanpeitto/bookstore_m3_w3",children:Object(w.jsx)(o.a.StrictMode,{children:Object(w.jsx)(Z,{})})})}),document.getElementById("root")),$()}},[[76,1,2]]]);
//# sourceMappingURL=main.8f9e2fdb.chunk.js.map